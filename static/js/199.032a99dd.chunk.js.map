{"version":3,"file":"static/js/199.032a99dd.chunk.js","mappings":"6OACA,EAAgM,oCAAhM,EAAmP,2BAAnP,EAA0R,wBAA1R,EAA4T,sBAA5T,EAA8V,wB,6BCiF9V,EAnEuB,WACpB,IAAMA,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MACXC,GAAoBC,EAAAA,EAAAA,IAAYC,EAAAA,IAChCC,GAAaF,EAAAA,EAAAA,IAAYG,EAAAA,IACzBC,EAAYC,EAAAA,QAAa,GAE/BA,EAAAA,WAAgB,WACb,GAAID,EAAUE,QAAS,CACpB,IAAMC,EAAmBC,KAAKC,UAAUV,GAClCW,EAAyBF,KAAKC,UAAUP,GAC9CS,aAAaC,QAAQ,OAAQL,GAC7BI,aAAaC,QAAQ,iBAAkBF,EACzC,CACDN,EAAUE,SAAU,CACtB,GAAE,CAACP,EAAMG,IAEVG,EAAAA,WAAgB,WACbV,GAASkB,EAAAA,EAAAA,IAAcd,EAAMe,QAAO,SAACC,EAAKC,GAAN,OAAeD,EAAMC,EAAKC,KAA1B,GAAiC,IACvE,GAAE,CAAClB,IAQJ,OACG,yBACIA,EAAMmB,OAAS,GACb,iBAAKC,UAAWC,EAAhB,WACG,gBAAKD,UAAWC,EAAhB,SACIrB,EAAMsB,KAAI,SAACC,GAAD,OACR,4BACG,gBAAKC,IAAKD,EAAEE,MAAOC,IAAI,MACvB,4BACIH,EAAEI,MADN,MACgBJ,EAAEL,MADlB,2BAGA,gBACGE,UAAWC,EACXO,QAAS,WACNhC,GAASiC,EAAAA,EAAAA,IAAiBN,EAAEO,KAC5BlC,GAASmC,EAAAA,EAAAA,IAAkBR,EAAEO,IAC/B,EALJ,kHALOP,EAAEO,GADJ,OAkBd,iBAAKV,UAAWC,EAAhB,WACG,wGAAoBlB,EAApB,2BACA,mBAAQyB,QA/BI,WAExBhC,GAASoC,EAAAA,EAAAA,IAAmB7B,IAC5BL,EAAS,cACX,EA2Bc,oGAIN,iBAAKsB,UAAWC,EAAhB,WACG,wGACA,0BACG,gBAAKG,IAAKS,EAAWP,IAAI,eAM1C,C","sources":["webpack://gamestore/./src/components/cart/Cart.module.scss?a847","components/cart/Cart.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"conteiner__catalog\":\"Cart_conteiner__catalog__JdYna\",\"sortList\":\"Cart_sortList__R5fcY\",\"conteiner__catalog_game\":\"Cart_conteiner__catalog_game__uNRsP\",\"conteiner__gameInCart\":\"Cart_conteiner__gameInCart__f6gAI\",\"priceAllGame\":\"Cart_priceAllGame__F0WSE\",\"gameTitle\":\"Cart_gameTitle__7Pvx1\",\"btnItem\":\"Cart_btnItem__-Prwf\",\"cartImage\":\"Cart_cartImage__sqYD2\",\"btn_wave\":\"Cart_btn_wave__8MBhh\"};","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n   clearCart,\r\n   deleteGameInCart,\r\n   gameInCartSelector,\r\n   setTotalPrice,\r\n   totalPriceSelector,\r\n} from \"../store/cartReducer/cartSlice\";\r\nimport cartImage from \"../../assets/img/cart.png\";\r\nimport classes from \"./Cart.module.scss\";\r\nimport { GameType } from \"../types/type\";\r\nimport { deleteGameInOrder, setNewOrder, setOrderTotalPrice } from \"../store/orderReducer/orderSlice\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Cart: React.FC = () => {\r\n   const dispatch = useDispatch();\r\n   const navigate = useNavigate();\r\n   const items: GameType[] = useSelector(gameInCartSelector);\r\n   const totalPrice = useSelector(totalPriceSelector);\r\n   const isMounted = React.useRef(false);\r\n\r\n   React.useEffect(()=> {\r\n      if (isMounted.current) {\r\n         const localStorageData = JSON.stringify(items);\r\n         const localStorageTotalPrice = JSON.stringify(totalPrice);\r\n         localStorage.setItem('cart', localStorageData);\r\n         localStorage.setItem('cartTotalPrice', localStorageTotalPrice);\r\n      }\r\n      isMounted.current = true;\r\n   }, [items,totalPrice])\r\n\r\n   React.useEffect(() => {\r\n      dispatch(setTotalPrice(items.reduce((acc, game) => acc + game.price, 0)));\r\n   }, [items]);\r\n\r\n   const onClickOrderFinish = () => {\r\n     // dispatch(setNewOrder(items));\r\n      dispatch(setOrderTotalPrice(totalPrice));\r\n      navigate('/cart/order')\r\n   };\r\n\r\n   return (\r\n      <div>\r\n         {items.length > 0 ? (\r\n            <div className={classes.conteiner__gameInCart}>\r\n               <div className={classes.gameTitle}>\r\n                  {items.map((i) => (\r\n                     <div key={i.id}>\r\n                        <img src={i.image} alt=\"\" />\r\n                        <span>\r\n                           {i.title} - {i.price} руб.\r\n                        </span>\r\n                        <div\r\n                           className={classes.btnItem}\r\n                           onClick={() => {\r\n                              dispatch(deleteGameInCart(i.id));\r\n                              dispatch(deleteGameInOrder(i.id));\r\n                           }}\r\n                        >\r\n                           Удалить из корзины\r\n                        </div>\r\n                     </div>\r\n                  ))}\r\n               </div>\r\n               <div className={classes.priceAllGame}>\r\n                  <b>Всего к оплате: {totalPrice} руб.</b>\r\n                  <button onClick={onClickOrderFinish}>Оформить заказ</button>\r\n               </div>\r\n            </div>\r\n         ) : (\r\n            <div className={classes.cartImage}>\r\n               <i>\"Корзина пуста\"</i>\r\n               <div>\r\n                  <img src={cartImage} alt=\"cart\" />\r\n               </div>\r\n            </div>\r\n         )}\r\n      </div>\r\n   );\r\n};\r\n\r\nexport default Cart;\r\n"],"names":["dispatch","useDispatch","navigate","useNavigate","items","useSelector","gameInCartSelector","totalPrice","totalPriceSelector","isMounted","React","current","localStorageData","JSON","stringify","localStorageTotalPrice","localStorage","setItem","setTotalPrice","reduce","acc","game","price","length","className","classes","map","i","src","image","alt","title","onClick","deleteGameInCart","id","deleteGameInOrder","setOrderTotalPrice","cartImage"],"sourceRoot":""}